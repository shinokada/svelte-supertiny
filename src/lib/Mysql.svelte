<script lang='ts'>
  import { getContext } from 'svelte';

  interface CtxType {
		size?: string;
		role?: string;
    withEvents?: boolean;
	}

  type TitleType = {
    id?: string;
    title?: string;
  };

  type DescType = {
    id?: string;
    desc?: string;
  };

  const ctx: CtxType = getContext('iconCtx') ?? {};

  interface Props{
    onclick?: ()=>void;
    size?: string;
    role?: string;
    ariaLabel?: string;
    class?: string;
    withEvents?: boolean;
    title?: TitleType;
    desc?: DescType;
  }
  let { 
    onclick,
    size = ctx.size || '24', 
    role = ctx.role || 'img',  
    ariaLabel =  "mysql" , 
    class: classname, 
    withEvents = ctx.withEvents || false,
    title,
    desc,
    ...restProps 
  }: Props = $props();

  let ariaDescribedby = $state(`${title?.id || ''} ${desc?.id || ''}`);
  const hasDescription = $derived(!!(title?.id || desc?.id));
</script>

{#snippet svgContent()}
  <path d="m0 0H512V512H0" fill="#fff"/><path fill="#005c87" d="m55 285v56H41v-56q0-7 6-9t12-1 10 8l21 48 21-48q4-7 10-8t12 1 6 9v56h-14v-56l-22 49q-3 8-13 8t-13-8m74-38v32c0 6 8 13 25 13h28v5q0 6-11 6h-42v9h41q26 0 26-15v-50h-14v36h-31q-8 0-8-5v-31m176-130c7-2 12 6 6 10m34 90q-15-14-27-43-7 5-8 22c-1 7-17-14-6-40q2-6 0-8c-14-17-7-23-21-40s3-16 19-2c28-2 55 28 64 48s15 37 21 38q20 6 33 19-16 0-25 5c5 17 24 17 38 31-10-19-26-21-29-28 13-4 14-2 24-5q-12-17-39-28s-6-10-17-35-41-51-67-51c-27-21-41-5-26 11s4 18 21 40c-16 47 17 67 17 41l1-6c9 20 14 18 24 29"/><path fill="#e4830f" d="M229 332h38q11 0 11-6v-8q0-5-11-5h-15c-11 0-23-5-23-14v-8c0-9 7-15 21-15h43v9h-40q-9 0-9 6v6q0 7 9 7h19c11 0 20 6 20 12v11c0 9-11 14-21 14h-42m111-9h-12q-11 0-11-8v-31q0-8 12-8h18q12 0 12 8v32q0 4-4 6l-11-10h-16m35 17q9-2 9-13v-33q0-16-25-16h-21q-24 0-24 15v34q0 16 23 16h25l11 10h17m3-75h14v49q0 7 12 7h37v9h-38q-25 0-25-17"/>
{/snippet}

{#if withEvents}
  <svg xmlns="http://www.w3.org/2000/svg"
    width={size}
    height={size}
    class={classname}
    {...restProps}
    aria-label={ariaLabel}
    {role}
    viewBox="0 0 512 512"
    aria-describedby={hasDescription ? ariaDescribedby : undefined}
    onclick={onclick}
  >
  {#if title?.id && title.title}
    <title id={title.id}>{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id={desc.id}>{desc.desc}</desc>
  {/if}
  {@render svgContent()}
  </svg>
{:else}
  <svg xmlns="http://www.w3.org/2000/svg"
    width={size}
    height={size}
    class={classname}
    {...restProps}
    aria-label={ariaLabel}
    {role}
    viewBox="0 0 512 512"
    aria-describedby={hasDescription ? ariaDescribedby : undefined}
  >
  {#if title?.id && title.title}
    <title id={title.id}>{title.title}</title>
  {/if}
  {#if desc?.id && desc.desc}
    <desc id={desc.id}>{desc.desc}</desc>
  {/if}
  {@render svgContent()}
  </svg>
{/if}

<!--
@component
[Go to docs](https://runes-webkit.codewithshin.com/)
## Props
@prop onclick
@prop size = ctx.size || '24'
@prop role = ctx.role || 'img'
@prop ariaLabel =  "mysql"
@prop class: classname
@prop withEvents = ctx.withEvents || false
@prop title
@prop desc
@prop ...restProps
-->
